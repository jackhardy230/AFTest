{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\keuda\\\\Desktop\\\\react\\\\new\\\\afAssignment\\\\stack-client\\\\src\\\\components\\\\all_category.js\";\nimport React from 'react';\nimport '../App.css';\nimport catApi from \"../actions/categoryApi.js\";\nimport swal from 'sweetalert';\nconst initialState = {\n  name: \"\",\n  nameError: \"\",\n  categories: []\n};\n\nclass Category extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      const isCheckbox = e.target.type === \"checkbox\";\n      this.setState({\n        [e.target.name]: isCheckbox ? e.target.checked : e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const isValid = this.validate();\n\n      if (isValid) {\n        console.log(this.state);\n        catApi.category().fetchAll().then(res => {\n          const cat = res.data.filter(cat => cat.name === this.state.name);\n\n          if (cat.length > 0) {\n            swal(\"Warning!\", \"Catgory Name Already Exists!\", \"warning\");\n          } else {\n            catApi.category().create(this.state).then(res => {\n              swal(\"Success!\", \"Add successful!\", \"success\");\n              this.setState(initialState);\n              this.componentDidMount();\n            });\n          }\n        });\n      }\n    };\n\n    this.validate = () => {\n      let nameError = \"\";\n\n      if (!this.state.name) {\n        nameError = \"Name Required!\";\n      }\n\n      if (nameError) {\n        this.setState({\n          nameError\n        });\n        return false;\n      }\n\n      return true;\n    };\n\n    this.state = initialState;\n  }\n\n  componentDidMount() {\n    const url = \"http://localhost:3500/category\";\n    fetch(url).then(response => response.json()).then(json => this.setState({\n      categories: json\n    }));\n  }\n\n  onDelete(id) {\n    swal({\n      title: \"Are you sure?\",\n      text: \"Delete this record!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        catApi.category().delete(id).then(res => {\n          swal(\"Delete Successful!\", {\n            icon: \"success\"\n          });\n          this.componentDidMount();\n        });\n      }\n    });\n  }\n\n  render() {\n    if (localStorage.getItem('userEmail')) {\n      const {\n        categories\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 22\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      }, \"Category\"), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"table\", {\n        class: \"table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 37\n        }\n      }, \"Category Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 37\n        }\n      }, \"Remove\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 29\n        }\n      }, categories.map(category => /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 37\n        }\n      }, category.name), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        onClick: () => this.onDelete(category._id),\n        class: \"btn btn-danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 57\n        }\n      }, \"Delete\"))))))));\n    }\n  }\n\n}\n\nexport default Category;","map":{"version":3,"sources":["C:/Users/keuda/Desktop/react/new/afAssignment/stack-client/src/components/all_category.js"],"names":["React","catApi","swal","initialState","name","nameError","categories","Category","Component","constructor","props","handleChange","e","isCheckbox","target","type","setState","checked","value","handleSubmit","preventDefault","isValid","validate","console","log","state","category","fetchAll","then","res","cat","data","filter","length","create","componentDidMount","url","fetch","response","json","onDelete","id","title","text","icon","buttons","dangerMode","willDelete","delete","render","localStorage","getItem","map","_id"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../App.css';\r\nimport catApi from \"../actions/categoryApi.js\";\r\nimport swal from 'sweetalert';\r\n\r\nconst initialState = {\r\n    name: \"\",\r\n    nameError: \"\",\r\n    categories: []\r\n}\r\n\r\nclass Category extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = initialState;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const url = \"http://localhost:3500/category\";\r\n        fetch(url).then(response => response.json())\r\n        .then(json => this.setState({categories: json}))\r\n    }\r\n\r\n    handleChange = e => {\r\n        const isCheckbox = e.target.type === \"checkbox\";\r\n        this.setState({\r\n            [e.target.name]: isCheckbox\r\n                ? e.target.checked\r\n                : e.target.value\r\n        });\r\n    }\r\n\r\n    onDelete(id){\r\n        swal({\r\n            title: \"Are you sure?\",\r\n            text: \"Delete this record!\",\r\n            icon: \"warning\",\r\n            buttons: true,\r\n            dangerMode: true,\r\n          })\r\n          .then((willDelete) => {\r\n            if (willDelete) {\r\n                catApi.category().delete(id)\r\n                .then(res =>{\r\n                    swal(\"Delete Successful!\", {\r\n                        icon: \"success\",\r\n                    })\r\n                    this.componentDidMount()\r\n                });\r\n            }\r\n          })\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const isValid = this.validate();\r\n        if(isValid){\r\n            console.log(this.state);\r\n            catApi.category().fetchAll().then(res => {\r\n                const cat = res.data.filter( cat => cat.name===this.state.name);\r\n                if(cat.length>0){\r\n                    swal(\"Warning!\", \"Catgory Name Already Exists!\", \"warning\")\r\n                }else{\r\n                    catApi.category().create(this.state)\r\n                    .then(res => {\r\n                        swal(\"Success!\", \"Add successful!\", \"success\")\r\n                        this.setState(initialState)\r\n                        this.componentDidMount()\r\n                    } );\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    validate = () => {\r\n        let nameError = \"\";\r\n\r\n        if(!this.state.name){\r\n            nameError=\"Name Required!\"\r\n        }\r\n\r\n        if(nameError){\r\n            this.setState({ nameError });\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    render (){\r\n        if(localStorage.getItem('userEmail')){\r\n            const { categories } = this.state;\r\n            return (\r\n                <div class=\"container\">\r\n                <br/><br/>\r\n                    <div class=\"justify-content-center\">\r\n                        <h1>Category</h1>\r\n                        <hr/>\r\n                        <table class=\"table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th class=\"tableTh\">Category Name</th>\r\n                                    <th class=\"tableTh\">Remove</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {\r\n\r\n                                categories.map((category) =>\r\n\r\n                                <tr>\r\n                                    <td class=\"tableTh\">{ category.name }</td>\r\n                                    <td class=\"tableTh\"><button type='button' onClick={() => this.onDelete(category._id)} class='btn btn-danger'>Delete</button></td>\r\n                                </tr>\r\n                            )}\r\n                            </tbody>\r\n                        </table>\r\n                        \r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default Category;\r\n"]},"metadata":{},"sourceType":"module"}