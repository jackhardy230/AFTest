{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\keuda\\\\Desktop\\\\react\\\\new\\\\afAssignment\\\\stack-client\\\\src\\\\components\\\\all_product.js\";\nimport React from 'react';\nimport '../App.css';\nimport proApi from \"../actions/productApi.js\";\nimport swal from 'sweetalert';\nimport axios from 'axios';\nconst initialState = {\n  id: \"\",\n  name: \"\",\n  nameError: \"\",\n  description: \"\",\n  category: \"\",\n  descriptionError: \"\",\n  categoryError: \"\",\n  quantity: \"\",\n  quantityError: \"\",\n  price: \"\",\n  priceError: \"\",\n  discount: \"\",\n  discountError: \"\",\n  confirmButton: \"ADD\",\n  categories: [],\n  products: [],\n  selectedFile: \"\",\n  image: \"\"\n};\n\nclass Product extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      const isCheckbox = e.target.type === \"checkbox\";\n      this.setState({\n        [e.target.name]: isCheckbox ? e.target.checked : e.target.value\n      });\n    };\n\n    this.onChangeHandler = event => {\n      this.setState({\n        selectedFile: event.target.files[0],\n        loaded: 0\n      }, () => {\n        const data = new FormData();\n        data.append('file', this.state.selectedFile);\n        axios.post(\"http://localhost:3500/product/upload\", data, {}).then(res => {\n          this.setState({\n            image: res.data.filename\n          });\n        });\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const isValid = this.validate();\n\n      if (isValid) {\n        console.log(this.state);\n        proApi.product().fetchAll().then(res => {\n          const pro = res.data.filter(product => product.name === this.state.name && product.category === this.state.category);\n\n          if (pro.length > 0 || this.state.id !== \"\") {\n            if (pro.length === 0) {\n              proApi.product().update(this.state.id, this.state).then(res => {\n                swal(\"Success!\", \"Edit Successful!\", \"success\");\n                this.setState(initialState);\n                this.componentDidMount();\n              });\n            } else if (this.state.id !== \"\" && pro[0].name === this.state.name && this.state.category === pro[0].category || pro.length === 0) {\n              proApi.product().update(this.state.id, this.state).then(res => {\n                swal(\"Success!\", \"Edit Successful!\", \"success\");\n                this.setState(initialState);\n                this.componentDidMount();\n              });\n            } else {\n              swal(\"Warning!\", \"Already Exists!\", \"warning\");\n            }\n          } else {\n            proApi.product().create(this.state).then(res => {\n              swal(\"Success!\", \"Add Successful!\", \"success\");\n              this.setState(initialState);\n              this.componentDidMount();\n            });\n          }\n        });\n      }\n    };\n\n    this.validate = () => {\n      let nameError = \"\";\n      let priceError = \"\";\n      let discountError = \"\";\n      let categoryError = \"\";\n      let quantityError = \"\";\n      let imageError = \"\";\n      let descriptionError = \"\";\n\n      if (!this.state.name) {\n        nameError = \"Product Name Required!\";\n      }\n\n      if (!this.state.description) {\n        descriptionError = \"Description Required!\";\n      }\n\n      if (!this.state.image) {\n        imageError = \"Image Required!\";\n      }\n\n      if (!this.state.price) {\n        priceError = \"Price Required!\";\n      } else if (isNaN(this.state.price)) {\n        priceError = \"Use only digits!\";\n      }\n\n      if (!this.state.discount) {\n        discountError = \"Discount Required!\";\n      } else if (isNaN(this.state.discount)) {\n        discountError = \"Use only digits!\";\n      }\n\n      if (!this.state.category) {\n        categoryError = \"seelect category!\";\n      }\n\n      if (!this.state.quantity) {\n        quantityError = \"Quantity Required!\";\n      } else if (isNaN(this.state.quantity)) {\n        quantityError = \"Use only digits!\";\n      }\n\n      if (nameError || quantityError || categoryError || discountError || priceError || imageError || descriptionError) {\n        this.setState({\n          nameError,\n          quantityError,\n          categoryError,\n          discountError,\n          priceError,\n          imageError,\n          descriptionError\n        });\n        return false;\n      } else {\n        this.setState({\n          nameError,\n          quantityError,\n          categoryError,\n          discountError,\n          priceError,\n          imageError,\n          descriptionError\n        });\n      }\n\n      return true;\n    };\n\n    this.state = initialState;\n  }\n\n  componentDidMount() {\n    const url = \"http://localhost:3500/category\";\n    fetch(url).then(response => response.json()).then(json => this.setState({\n      categories: json\n    }));\n    const purl = \"http://localhost:3500/product\";\n    fetch(purl).then(response => response.json()).then(json => this.setState({\n      products: json\n    }));\n  }\n\n  onChange(id) {\n    const url = \"http://localhost:3500/product/\";\n    fetch(url).then(response => response.json()).then(json => {\n      const pro = json.filter(pro => pro._id === id);\n      this.setState({\n        name: pro[0]['name'],\n        category: pro[0]['category'],\n        price: pro[0]['price'],\n        quantity: pro[0]['quantity'],\n        discount: pro[0]['discount'],\n        id: pro[0]['_id'],\n        image: pro[0]['image'],\n        description: pro[0]['description']\n      });\n    });\n    this.setState({\n      confirmButton: \"EDIT\"\n    });\n  }\n\n  onClear() {\n    this.setState(initialState);\n    this.componentDidMount();\n  }\n\n  onDelete(id) {\n    swal({\n      title: \"Are you sure?\",\n      text: \"Delete this record!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        proApi.product().delete(id).then(res => {\n          swal(\"Delete Successful!\", {\n            icon: \"success\"\n          });\n          this.componentDidMount();\n        });\n      }\n    });\n  }\n\n  render() {\n    if (localStorage.getItem('userEmail')) {\n      const {\n        categories,\n        products\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 22\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 25\n        }\n      }, \"ALL Product\"), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"x_scroll\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        class: \"table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 41\n        }\n      }, \"name\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 41\n        }\n      }, \"Description\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 41\n        }\n      }, \"Category\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 41\n        }\n      }, \"Quantity\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 41\n        }\n      }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 41\n        }\n      }, \"Discount\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 41\n        }\n      }, \"Image\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 41\n        }\n      }, \"Edit\"), /*#__PURE__*/React.createElement(\"th\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 41\n        }\n      }, \"Remove\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 33\n        }\n      }, products.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 41\n        }\n      }, product.name), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 41\n        }\n      }, product.description), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 41\n        }\n      }, product.category), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 41\n        }\n      }, product.quantity), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 41\n        }\n      }, product.price), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 41\n        }\n      }, product.discount), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        width: \"100px\",\n        alt: \"\",\n        src: \"http://localhost:3500/\" + product.image,\n        class: \"img-thumbnail\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 61\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        onClick: () => this.onChange(product._id),\n        class: \"btn btn-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 61\n        }\n      }, \"Edit\")), /*#__PURE__*/React.createElement(\"td\", {\n        class: \"tableTh\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        onClick: () => this.onDelete(product._id),\n        class: \"btn btn-danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 61\n        }\n      }, \"Delete\")))))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 29\n        }\n      }))));\n    }\n  }\n\n}\n\nexport default Product;","map":{"version":3,"sources":["C:/Users/keuda/Desktop/react/new/afAssignment/stack-client/src/components/all_product.js"],"names":["React","proApi","swal","axios","initialState","id","name","nameError","description","category","descriptionError","categoryError","quantity","quantityError","price","priceError","discount","discountError","confirmButton","categories","products","selectedFile","image","Product","Component","constructor","props","handleChange","e","isCheckbox","target","type","setState","checked","value","onChangeHandler","event","files","loaded","data","FormData","append","state","post","then","res","filename","handleSubmit","preventDefault","isValid","validate","console","log","product","fetchAll","pro","filter","length","update","componentDidMount","create","imageError","isNaN","url","fetch","response","json","purl","onChange","_id","onClear","onDelete","title","text","icon","buttons","dangerMode","willDelete","delete","render","localStorage","getItem","map"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../App.css';\r\nimport proApi from \"../actions/productApi.js\";\r\nimport swal from 'sweetalert';\r\nimport axios from 'axios';\r\n\r\nconst initialState = {\r\n    id: \"\",\r\n    name: \"\",\r\n    nameError: \"\",\r\n    description: \"\",\r\n    category: \"\",\r\n    descriptionError: \"\",\r\n    categoryError: \"\",\r\n    quantity: \"\",\r\n    quantityError: \"\",\r\n    price: \"\",\r\n    priceError: \"\",\r\n    discount: \"\",\r\n    discountError: \"\",\r\n    confirmButton: \"ADD\",\r\n    categories: [],\r\n    products: [],\r\n    selectedFile: \"\",\r\n    image:\"\"\r\n}\r\n\r\nclass Product extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = initialState;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const url = \"http://localhost:3500/category\";\r\n        fetch(url).then(response => response.json())\r\n        .then(json => this.setState({categories: json}))\r\n        const purl = \"http://localhost:3500/product\";\r\n        fetch(purl).then(response => response.json())\r\n        .then(json => this.setState({products: json}))\r\n    }\r\n\r\n    handleChange = e => {\r\n        const isCheckbox = e.target.type === \"checkbox\";\r\n        this.setState({\r\n            [e.target.name]: isCheckbox\r\n                ? e.target.checked\r\n                : e.target.value\r\n        });\r\n    }\r\n\r\n    onChange(id){\r\n        const url = \"http://localhost:3500/product/\";\r\n        fetch(url).then(response => response.json())\r\n        .then(json => {\r\n            const pro = json.filter(pro => pro._id===id)\r\n            this.setState({name: pro[0]['name'],category: pro[0]['category'],price: pro[0]['price'],quantity: pro[0]['quantity'],discount: pro[0]['discount'],id: pro[0]['_id'],image: pro[0]['image'],description: pro[0]['description']})\r\n        })\r\n        this.setState({confirmButton:\"EDIT\"});\r\n    }\r\n\r\n    onClear(){\r\n        this.setState(initialState);\r\n        this.componentDidMount();\r\n    }\r\n\r\n    onDelete(id){\r\n        swal({\r\n            title: \"Are you sure?\",\r\n            text: \"Delete this record!\",\r\n            icon: \"warning\",\r\n            buttons: true,\r\n            dangerMode: true,\r\n          })\r\n          .then((willDelete) => {\r\n            if (willDelete) {\r\n                proApi.product().delete(id)\r\n                .then(res =>{\r\n                    swal(\"Delete Successful!\", {\r\n                        icon: \"success\",\r\n                    })\r\n                    this.componentDidMount()\r\n                });\r\n            }\r\n          })\r\n    }\r\n\r\n    onChangeHandler=event=>{\r\n        this.setState({\r\n            selectedFile: event.target.files[0],\r\n            loaded: 0,\r\n        }, () => {\r\n            const data = new FormData() \r\n            data.append('file', this.state.selectedFile)\r\n            axios.post(\"http://localhost:3500/product/upload\", data, { \r\n            }).then(res => { \r\n                this.setState({image:res.data.filename})\r\n            })\r\n        })\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const isValid = this.validate();\r\n        if(isValid){\r\n            console.log(this.state);\r\n            proApi.product().fetchAll().then(res => {\r\n                const pro = res.data.filter( product => (product.name===this.state.name&&product.category===this.state.category));\r\n                if(pro.length>0||this.state.id!==\"\"){\r\n                    if(pro.length===0){\r\n                        proApi.product().update(this.state.id,this.state)\r\n                        .then(res => {\r\n                            swal(\"Success!\", \"Edit Successful!\", \"success\")\r\n                            this.setState(initialState)\r\n                            this.componentDidMount()\r\n                        } );\r\n                    }else if((this.state.id!==\"\"&&pro[0].name===this.state.name&&this.state.category===pro[0].category)||pro.length===0){\r\n                        proApi.product().update(this.state.id,this.state)\r\n                        .then(res => {\r\n                            swal(\"Success!\", \"Edit Successful!\", \"success\")\r\n                            this.setState(initialState)\r\n                            this.componentDidMount()\r\n                        } );\r\n                    } else {\r\n                        swal(\"Warning!\", \"Already Exists!\", \"warning\")\r\n                    }\r\n                }else{\r\n                    proApi.product().create(this.state)\r\n                    .then(res => {\r\n                        swal(\"Success!\", \"Add Successful!\", \"success\")\r\n                        this.setState(initialState)\r\n                        this.componentDidMount()\r\n                    } );\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    validate = () => {\r\n        let nameError = \"\";\r\n        let priceError = \"\";\r\n        let discountError = \"\";\r\n        let categoryError = \"\";\r\n        let quantityError = \"\";\r\n        let imageError = \"\";\r\n        let descriptionError = \"\";\r\n\r\n        if(!this.state.name){\r\n            nameError=\"Product Name Required!\"\r\n        }\r\n\r\n        if(!this.state.description){\r\n            descriptionError=\"Description Required!\"\r\n        }\r\n\r\n        if(!this.state.image){\r\n            imageError=\"Image Required!\"\r\n        }\r\n\r\n        if(!this.state.price){\r\n            priceError=\"Price Required!\"\r\n        }else if(isNaN(this.state.price)){\r\n            priceError = \"Use only digits!\";\r\n        }\r\n\r\n        if(!this.state.discount){\r\n            discountError=\"Discount Required!\"\r\n        }else if(isNaN(this.state.discount)){\r\n            discountError = \"Use only digits!\";\r\n        }\r\n\r\n        if(!this.state.category){\r\n            categoryError=\"seelect category!\"\r\n        }\r\n\r\n        if(!this.state.quantity){\r\n            quantityError=\"Quantity Required!\"\r\n        }else if(isNaN(this.state.quantity)){\r\n            quantityError = \"Use only digits!\";\r\n        }\r\n\r\n        if(nameError||quantityError||categoryError||discountError||priceError||imageError||descriptionError){\r\n            \r\n            this.setState({ nameError ,quantityError ,categoryError,discountError,priceError,imageError,descriptionError});\r\n            \r\n            return false;\r\n\r\n        }else{\r\n\r\n            this.setState({ nameError ,quantityError ,categoryError,discountError,priceError,imageError,descriptionError});\r\n        \r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    render (){\r\n        if(localStorage.getItem('userEmail')){\r\n            const { categories , products } = this.state;\r\n            return (\r\n                <div class=\"container\">\r\n                <br/><br/>\r\n                    <div class=\"justify-content-center\">\r\n                        <h1>ALL Product</h1>\r\n                        <hr/>\r\n                        <div class=\"x_scroll\">\r\n                            <table class=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th class=\"tableTh\">name</th>\r\n                                        <th class=\"tableTh\">Description</th>\r\n                                        <th class=\"tableTh\">Category</th>\r\n                                        <th class=\"tableTh\">Quantity</th>\r\n                                        <th class=\"tableTh\">Price</th>\r\n                                        <th class=\"tableTh\">Discount</th>\r\n                                        <th class=\"tableTh\">Image</th>\r\n                                        <th class=\"tableTh\">Edit</th>\r\n                                        <th class=\"tableTh\">Remove</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                {\r\n\r\n                                    products.map((product) =>\r\n\r\n                                    <tr>\r\n                                        <td class=\"tableTh\">{ product.name }</td>\r\n                                        <td class=\"tableTh\">{ product.description }</td>\r\n                                        <td class=\"tableTh\">{ product.category }</td>\r\n                                        <td class=\"tableTh\">{ product.quantity }</td>\r\n                                        <td class=\"tableTh\">{ product.price }</td>\r\n                                        <td class=\"tableTh\">{ product.discount }</td>\r\n                                        <td class=\"tableTh\"><img width=\"100px\" alt=\"\" src={ \"http://localhost:3500/\"+product.image } class=\"img-thumbnail\"/></td>\r\n                                        <td class=\"tableTh\"><button type='button' onClick={() => this.onChange(product._id)} class='btn btn-success'>Edit</button></td>\r\n                                        <td class=\"tableTh\"><button type='button' onClick={() => this.onDelete(product._id)} class='btn btn-danger'>Delete</button></td>\r\n                                    </tr>\r\n                                )}\r\n                                </tbody>\r\n                            </table>\r\n                            <br></br>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default Product;\r\n"]},"metadata":{},"sourceType":"module"}